# 项目实现计划

## 一、核心功能模块

### 1. 数据采集模块（Crawler）
**目标**：爬取科大各网站的文件和文档

**关键实现点**：
- 使用Scrapy框架构建爬虫
- 识别并优先爬取"下载中心"等文件专栏
- 支持多种文件格式（PDF、DOC、DOCX、XLS、XLSX、TXT等）
- 实现URL去重和增量更新
- 提取文件元数据（标题、作者、时间、来源等）

**技术难点**：
- 不同网站结构差异大，需要针对性的解析规则
- JavaScript动态加载内容的处理
- 大文件的下载和存储策略

### 2. 数据存储模块（Storage）
**目标**：将爬取的数据存储到HBase

**HBase表设计**：
```
表名：ustc_documents

Row Key设计：hash(url) + timestamp
Column Families:
  - info: 元数据
    - url: 文档URL
    - title: 标题
    - content: 文本内容（提取的）
    - file_type: 文件类型
    - file_size: 文件大小
    - crawl_time: 爬取时间
    - source: 来源网站
  - file: 文件数据（可选，大文件可存HDFS）
    - data: 文件二进制数据
  - index: 索引相关
    - keywords: 关键词
    - summary: 摘要
```

**技术难点**：
- HBase表结构设计优化
- 大文件存储策略（HBase vs HDFS）
- 数据一致性保证

### 3. 搜索引擎模块（Search）
**目标**：实现文档搜索和相关性排序

**核心算法**：
1. **中文分词**：使用jieba分词，可添加科大相关自定义词典
2. **倒排索引**：
   - 词项 → 文档ID列表
   - 存储词频、位置信息等
3. **相关性评分**：
   - TF-IDF：基础算法
   - BM25：改进的排序算法
   - 考虑标题权重、位置权重

**索引存储**：
- 方案1：存储在HBase中（倒排索引表）
- 方案2：存储在内存/Redis中（快速查询）

**技术难点**：
- 大规模倒排索引的构建和更新
- 中文分词准确性
- 相关性算法的调优

### 4. Web界面模块（Web）
**目标**：提供友好的搜索界面

**功能**：
- 搜索框
- 搜索结果展示（标题、摘要、来源、相关性分数）
- 分页功能
- 文件下载链接
- 高级搜索（按来源、文件类型筛选）

## 二、开发优先级

### Phase 1: 基础框架搭建（1-2天）
- [x] 创建conda环境
- [ ] 安装Hadoop和HBase
- [ ] 创建项目目录结构
- [ ] 配置开发环境

### Phase 2: 爬虫开发（3-5天）
- [ ] 分析目标网站结构
- [ ] 实现基础爬虫框架
- [ ] 实现文件下载功能
- [ ] 实现数据清洗和去重
- [ ] 测试爬取效果

### Phase 3: HBase存储（2-3天）
- [ ] 设计HBase表结构
- [ ] 实现数据写入接口
- [ ] 实现数据读取接口
- [ ] 测试存储性能

### Phase 4: 搜索引擎（4-6天）
- [ ] 实现中文分词
- [ ] 实现倒排索引构建
- [ ] 实现TF-IDF算法
- [ ] 实现BM25算法
- [ ] 实现搜索接口
- [ ] 测试搜索效果

### Phase 5: Web界面（2-3天）
- [ ] 开发Flask后端API
- [ ] 开发前端搜索界面
- [ ] 实现结果展示
- [ ] 实现文件下载

### Phase 6: 优化和测试（2-3天）
- [ ] 性能优化
- [ ] 功能测试
- [ ] 准备演示材料

## 三、技术选型说明

### 为什么选择自建搜索引擎而不是Elasticsearch？

1. **符合课程要求**：更能体现对大数据技术的理解
2. **学习价值**：深入理解倒排索引、TF-IDF等核心算法
3. **可控性**：完全控制搜索逻辑，便于优化
4. **轻量级**：不需要额外部署ES服务

### HBase vs 其他数据库

1. **符合要求**：作业明确要求使用HBase
2. **分布式特性**：支持大规模数据存储
3. **列式存储**：适合存储文档的多个属性
4. **课程相关**：与课程内容紧密结合

## 四、可能遇到的挑战

1. **网站反爬虫**：需要合理设置User-Agent、延迟等
2. **数据量大**：需要优化存储和索引策略
3. **中文分词准确性**：可能需要自定义词典
4. **相关性排序效果**：需要调优算法参数
5. **HBase配置**：本地环境配置可能复杂

## 五、扩展功能（可选）

1. **搜索建议**：输入提示
2. **搜索历史**：记录用户搜索
3. **热门搜索**：统计热门关键词
4. **文档预览**：在线预览PDF等文件
5. **多语言支持**：支持中英文混合搜索

## 六、测试策略

1. **单元测试**：各模块独立测试
2. **集成测试**：模块间接口测试
3. **性能测试**：大规模数据下的性能
4. **功能测试**：搜索准确性测试


